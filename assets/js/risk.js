var win_probabilities = [0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,40.9,10.6,2.7,0.1,0.2,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,73.9,35.4,23.1,9.2,4.6,2.3,0.8,0.5,0.1,0.0,0.1,0.0,0.1,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,92.5,65.5,46.1,32.7,20.5,12.2,8.0,4.7,3.8,2.0,1.0,1.0,0.5,0.8,0.1,0.1,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,97.3,78.0,64.8,47.6,36.5,22.8,19.8,12.0,9.2,6.4,4.6,2.3,2.8,0.8,0.6,0.3,0.2,0.1,0.0,0.2,0.0,0.0,0.1,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,99.4,88.9,76.1,66.3,53.5,39.1,28.7,21.4,17.2,12.4,8.5,7.7,3.8,2.4,2.2,1.6,1.0,0.7,0.4,0.3,0.3,0.2,0.0,0.1,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,99.7,94.0,85.0,73.8,60.5,53.0,41.4,34.9,23.7,20.2,14.9,11.1,7.5,6.3,4.3,3.0,1.8,1.7,1.4,0.8,0.1,0.1,0.4,0.2,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.1,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,100.0,95.9,91.7,81.9,72.2,62.0,54.7,45.4,37.2,27.9,20.4,16.8,13.8,10.4,8.6,4.8,4.1,3.2,2.1,1.1,0.6,1.1,0.8,0.2,0.1,0.1,0.2,0.0,0.0,0.1,0.0,0.1,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,100.0,97.8,92.9,87.2,82.6,71.0,63.8,53.5,47.4,38.3,32.3,24.6,19.0,15.9,12.1,9.4,6.8,5.1,3.4,3.2,2.8,1.2,0.9,0.5,0.4,0.2,0.1,0.1,0.1,0.0,0.2,0.1,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,100.0,99.0,97.8,93.0,88.5,80.7,72.2,66.1,58.0,49.3,38.4,32.8,26.7,21.8,17.6,14.6,8.6,8.2,6.8,5.0,4.8,3.1,1.7,1.7,1.1,0.8,0.5,0.1,0.3,0.1,0.1,0.0,0.0,0.1,0.1,0.0,0.2,0.0,0.0,0.1,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,100.0,99.5,98.5,95.0,90.8,85.8,81.0,73.4,65.8,59.6,48.8,44.1,33.8,30.6,23.9,19.4,15.0,13.1,9.8,5.9,6.1,4.9,4.4,1.6,2.7,0.9,0.8,0.6,0.5,0.6,0.1,0.1,0.3,0.2,0.0,0.0,0.2,0.1,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.1,0.0,0.0,0.0,0.0,100.0,100.0,98.7,96.1,95.0,91.2,85.2,81.7,72.3,67.1,55.2,51.4,42.2,39.7,33.0,27.1,19.9,18.7,15.3,9.3,8.2,7.7,4.7,3.7,3.5,2.4,1.8,0.8,1.1,0.3,0.4,0.3,0.1,0.4,0.3,0.0,0.1,0.1,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,100.0,99.8,99.2,98.5,95.9,95.3,90.6,84.8,81.6,73.1,66.2,58.3,51.8,46.0,37.6,33.2,28.4,23.8,20.8,14.0,13.0,9.1,9.0,7.0,6.2,3.2,2.8,2.4,1.2,1.6,1.4,0.6,0.3,0.3,0.3,0.3,0.2,0.2,0.2,0.1,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,100.0,99.8,99.3,99.0,97.7,95.0,93.3,88.0,85.6,79.8,72.2,65.6,60.9,52.9,43.4,40.1,35.0,29.5,23.5,18.7,16.7,12.7,11.5,9.0,8.5,4.8,4.8,2.7,1.8,2.3,1.3,1.6,0.9,0.4,0.6,0.2,0.4,0.1,0.1,0.1,0.1,0.1,0.0,0.0,0.0,0.1,0.0,0.0,0.0,0.0,100.0,100.0,99.8,99.4,98.7,97.1,94.6,91.8,87.8,82.1,75.9,71.2,67.9,59.6,52.9,48.2,43.0,34.3,32.5,26.0,20.8,19.2,16.5,12.8,10.4,7.0,7.1,4.7,3.9,2.9,2.9,2.9,1.4,1.4,0.8,0.6,0.5,0.4,0.1,0.2,0.1,0.1,0.1,0.1,0.1,0.0,0.1,0.0,0.0,0.0,100.0,100.0,99.9,99.6,99.3,98.5,96.1,93.9,93.0,86.5,82.6,75.9,73.7,67.1,58.2,55.1,48.3,42.6,36.5,33.0,26.4,23.0,16.7,17.8,13.2,11.8,9.7,7.9,7.6,2.9,3.8,3.3,2.4,2.1,1.7,0.6,0.4,0.5,0.4,0.3,0.3,0.2,0.1,0.1,0.0,0.0,0.0,0.0,0.1,0.0,100.0,100.0,100.0,99.7,98.9,99.2,97.8,96.0,93.0,91.8,86.5,81.4,79.0,73.7,67.4,61.2,55.3,48.2,48.6,40.2,37.2,29.4,25.4,21.8,18.1,13.6,11.1,10.3,8.5,7.0,6.0,4.0,4.1,2.1,2.5,1.6,0.8,0.9,0.6,0.6,0.4,0.5,0.2,0.0,0.1,0.1,0.2,0.2,0.0,0.0,100.0,100.0,99.8,100.0,99.3,99.1,98.6,98.0,95.2,92.6,91.1,88.1,83.3,78.2,72.5,67.6,62.5,55.0,51.3,46.9,39.7,34.5,27.5,27.6,22.7,18.5,15.1,15.2,10.2,8.1,7.4,6.4,4.9,4.5,2.6,2.1,1.9,2.4,1.4,1.3,0.7,0.5,0.4,0.3,0.4,0.3,0.0,0.0,0.0,0.0,100.0,100.0,100.0,100.0,99.9,99.5,98.9,98.4,96.7,95.5,93.1,89.2,86.7,82.6,75.5,71.8,66.5,60.9,56.0,50.6,43.9,42.9,34.1,30.4,26.5,22.1,19.4,17.4,14.3,12.4,9.5,9.4,6.0,5.4,5.0,2.8,2.8,2.6,2.0,1.2,1.4,1.0,1.1,0.7,0.5,0.3,0.2,0.2,0.0,0.2,100.0,100.0,100.0,99.8,99.8,99.4,99.3,98.4,97.7,96.8,94.6,92.4,90.4,86.5,81.8,78.2,72.8,71.7,61.1,59.1,53.1,47.0,38.0,36.4,35.4,28.1,23.4,20.4,16.6,14.2,14.3,13.4,9.8,6.8,5.9,5.1,3.0,3.1,2.9,2.5,1.7,1.0,0.9,0.7,0.8,0.3,0.4,0.4,0.1,0.1,100.0,100.0,100.0,100.0,100.0,99.8,99.7,99.5,98.7,97.7,96.4,94.1,91.9,89.3,87.2,82.3,78.9,71.8,68.6,61.2,59.3,52.8,50.2,44.4,38.4,31.8,29.9,23.2,22.2,19.9,15.5,13.3,11.3,10.6,8.4,6.7,5.4,4.5,2.9,3.4,1.9,1.9,1.4,1.3,1.8,0.9,0.8,0.5,0.8,0.3,100.0,100.0,100.0,100.0,100.0,100.0,99.8,99.6,99.2,98.5,97.9,96.1,93.0,92.5,89.4,86.5,82.1,78.6,74.0,68.7,62.9,58.6,54.0,46.8,46.3,35.7,36.1,30.1,25.3,24.7,20.2,16.2,15.7,14.1,11.3,10.9,7.6,4.7,4.8,4.7,4.1,2.5,2.8,2.7,1.0,1.1,1.1,0.7,0.3,0.9,100.0,100.0,100.0,100.0,100.0,99.9,99.9,99.6,99.6,99.3,98.1,96.7,96.3,95.0,92.0,89.6,87.4,82.7,75.9,77.5,66.9,65.2,60.8,51.8,45.8,46.2,39.2,35.4,35.3,27.3,24.6,23.3,19.1,17.7,14.0,11.7,9.8,8.2,6.1,5.0,5.1,5.8,2.4,1.9,1.3,1.5,0.9,1.2,0.6,0.7,100.0,100.0,100.0,100.0,100.0,100.0,99.9,99.8,99.6,99.5,98.5,98.2,95.6,95.5,94.0,91.0,88.1,83.5,83.7,77.4,73.6,70.6,64.7,60.4,56.7,48.6,41.9,39.6,34.3,34.3,30.1,25.3,22.5,20.9,15.3,13.4,12.9,10.2,9.4,7.7,5.2,5.6,3.4,3.2,2.6,2.3,1.7,1.6,1.0,0.9,100.0,100.0,100.0,100.0,100.0,100.0,100.0,99.8,99.7,99.1,98.3,97.8,98.3,96.2,94.7,93.7,91.3,86.6,84.1,83.7,76.0,72.3,70.7,61.3,62.3,55.5,52.1,45.8,40.4,39.1,33.2,28.5,26.0,22.7,19.2,19.0,15.4,11.2,10.7,8.9,8.0,5.8,5.9,4.1,3.8,3.6,2.6,2.8,1.2,1.3,100.0,100.0,99.9,100.0,100.0,100.0,100.0,99.9,99.8,99.6,99.6,98.6,98.6,97.5,96.3,95.2,93.6,90.6,87.9,82.6,82.5,78.9,74.5,69.6,62.8,61.8,58.2,51.0,47.1,46.9,36.7,36.3,29.8,28.1,23.5,20.9,17.6,15.3,12.5,12.7,9.6,9.8,8.6,5.6,4.4,5.0,3.3,2.2,1.8,1.2,100.0,100.0,100.0,100.0,100.0,100.0,100.0,99.9,100.0,99.5,99.5,99.2,99.2,98.6,97.9,96.2,95.2,93.7,90.7,87.2,87.1,80.4,80.2,74.0,69.5,66.4,62.0,55.4,52.9,48.0,43.8,37.3,36.5,31.7,27.1,26.6,21.9,19.2,16.7,16.1,10.4,11.0,7.6,9.1,7.3,4.1,5.3,4.6,3.0,2.5,100.0,100.0,100.0,100.0,100.0,99.9,100.0,100.0,100.0,99.9,99.8,99.3,98.9,98.9,97.8,97.9,96.4,95.9,93.0,91.8,86.0,84.2,80.2,77.7,73.4,72.4,65.1,64.0,55.0,53.5,48.5,45.7,40.7,32.3,33.3,30.1,26.0,23.9,22.0,17.5,15.2,15.4,11.2,9.0,7.8,6.9,4.9,5.3,3.7,3.8,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,99.9,99.7,100.0,99.5,99.2,98.4,98.9,97.4,97.0,95.5,93.4,92.3,91.1,87.6,84.4,80.3,78.5,71.0,72.8,67.6,63.7,58.3,54.6,52.6,45.7,40.8,37.4,36.1,31.4,27.9,25.4,20.4,18.3,14.3,16.4,11.9,11.5,8.2,7.9,5.4,5.1,3.3,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,99.8,100.0,99.9,99.4,99.3,99.0,97.8,97.5,96.6,94.3,94.1,92.5,90.8,88.1,84.0,84.8,79.5,77.7,73.7,68.2,62.2,59.0,56.0,50.2,45.4,45.2,37.5,31.3,34.0,27.7,22.8,20.0,20.5,17.3,13.3,11.1,10.4,9.0,7.4,7.1,5.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,99.9,100.0,99.9,99.9,100.0,99.9,99.7,99.6,98.4,97.9,97.2,96.7,95.8,94.5,92.0,91.1,87.7,84.7,80.7,78.7,75.8,72.0,66.0,63.3,57.2,54.6,47.7,48.5,41.3,38.6,33.1,31.6,28.1,23.5,20.3,19.0,19.8,15.2,15.9,12.7,11.4,8.4,7.1,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,99.9,99.7,99.6,99.7,99.7,99.6,98.5,98.1,97.0,95.9,95.5,93.0,92.2,90.8,87.0,85.1,82.4,80.0,76.1,71.2,71.0,63.3,58.2,58.6,51.8,43.5,44.1,41.5,39.9,31.9,31.3,25.0,20.6,20.7,18.2,16.7,12.5,12.3,13.0,7.6,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,99.9,99.8,99.5,99.6,98.9,99.3,98.0,98.6,97.6,96.1,95.0,94.0,92.0,90.9,88.0,85.7,84.0,77.4,76.5,72.4,68.3,67.1,62.5,57.3,52.4,48.3,43.2,40.7,36.2,36.6,32.4,29.9,24.4,20.7,20.5,18.1,14.4,12.1,11.9,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,99.9,99.8,100.0,99.7,99.7,99.9,99.6,99.3,99.0,98.4,97.6,97.2,96.4,94.9,93.5,92.5,90.0,85.5,85.5,80.5,80.8,75.4,72.6,68.4,67.7,61.4,58.2,52.4,51.9,45.6,43.6,37.4,33.4,28.9,28.5,25.8,22.2,15.7,18.7,17.8,12.8,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,99.9,99.5,99.6,99.1,98.9,99.1,98.6,99.0,97.0,96.1,94.7,93.2,91.9,90.3,87.3,83.8,82.2,80.7,79.3,72.8,68.0,64.6,61.8,59.0,53.3,48.9,47.6,43.6,39.6,36.5,33.2,28.9,26.1,21.4,21.8,18.3,17.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,99.9,100.0,99.9,100.0,99.8,99.9,99.5,99.5,99.5,98.9,98.7,97.0,97.1,95.2,94.5,93.5,90.8,90.7,87.2,83.5,81.8,80.9,78.4,73.8,71.9,67.5,59.5,57.0,54.8,51.9,48.6,43.7,41.7,36.3,34.6,31.4,27.3,23.1,22.7,18.5,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,99.9,100.0,99.9,99.9,99.6,99.9,99.5,99.3,99.1,98.2,98.4,97.5,97.2,94.6,94.4,92.2,93.0,91.1,88.3,86.3,80.9,81.5,78.3,73.6,69.7,66.4,62.8,59.3,55.4,53.2,47.6,43.0,42.4,37.3,35.6,30.0,25.5,23.1,19.8,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,99.9,100.0,100.0,100.0,99.9,99.9,99.7,99.7,99.4,98.8,98.9,98.0,98.0,96.8,94.9,93.9,94.4,92.1,90.6,87.8,85.7,82.4,79.4,74.0,75.4,71.9,66.9,60.9,62.2,52.7,49.5,44.7,45.0,40.2,34.5,34.2,31.6,26.6,26.6,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,99.9,100.0,100.0,99.9,100.0,99.7,99.9,99.5,99.4,98.8,98.6,98.2,98.2,97.2,97.5,95.8,94.8,91.5,88.5,89.6,88.7,84.6,83.0,80.8,76.9,73.8,70.6,67.5,66.5,60.9,57.9,52.9,48.0,44.8,41.2,37.9,36.3,32.9,30.7,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,99.9,100.0,99.7,99.4,99.3,99.3,98.3,98.2,96.8,97.2,96.7,95.7,93.9,93.0,91.3,90.4,87.8,85.9,82.4,78.9,76.5,72.8,72.6,67.7,62.2,59.0,57.3,51.5,48.0,45.8,44.3,36.0,33.8,34.1,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,99.9,100.0,99.9,99.9,99.9,99.9,99.8,99.4,99.4,99.4,99.2,98.8,96.9,98.1,95.9,94.3,93.5,94.0,91.1,89.0,86.7,85.5,81.4,81.0,76.3,73.8,70.4,67.1,62.6,63.9,62.4,56.8,46.9,45.8,41.3,42.3,33.1,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,99.9,99.8,99.7,99.8,99.5,99.7,99.2,98.6,98.5,97.8,97.2,95.6,95.3,95.2,92.9,90.7,90.0,88.0,86.0,82.6,80.6,76.9,73.6,71.3,67.3,63.8,59.7,56.5,56.2,51.2,46.4,43.9,39.8,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,99.9,99.9,99.6,99.4,99.9,99.9,99.6,99.1,98.6,97.6,97.4,96.2,95.3,95.9,93.0,92.7,89.9,86.4,85.7,80.4,79.2,79.5,74.1,74.5,69.8,67.0,62.6,58.1,51.8,50.9,47.5,45.9,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,99.9,99.8,99.7,99.6,99.4,98.8,98.3,98.9,98.4,97.8,97.7,96.6,94.6,93.4,91.7,90.8,89.9,87.6,84.0,83.2,78.7,75.5,75.3,71.2,69.7,64.5,60.7,58.1,55.2,51.8,48.3,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,99.9,100.0,100.0,99.7,99.9,99.8,99.8,99.6,99.6,98.8,99.1,98.2,97.7,96.9,95.3,94.9,93.3,92.7,89.9,89.1,87.1,86.9,82.9,82.4,76.6,76.2,71.1,68.8,64.3,63.5,56.6,56.8,53.3,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,99.9,100.0,99.8,100.0,99.9,99.7,99.7,98.9,99.4,99.5,98.4,98.3,97.1,96.8,94.5,95.5,93.7,92.5,91.1,89.8,84.9,83.7,81.4,80.3,76.9,75.6,73.5,71.3,66.5,64.5,62.0,54.7,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,99.8,99.8,99.9,99.8,99.6,99.6,99.5,99.3,98.3,98.8,98.4,97.1,95.7,95.5,94.3,93.9,92.3,91.8,90.4,87.4,85.0,80.4,79.8,77.5,74.8,73.8,71.0,68.9,63.0,59.7,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,99.9,100.0,100.0,100.0,100.0,99.8,99.8,99.7,99.8,99.4,99.4,99.1,99.1,97.7,97.8,96.7,97.3,95.5,94.7,93.8,89.9,90.8,87.8,88.7,85.1,84.3,81.5,78.8,72.8,73.8,67.8,70.2,63.3,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,99.9,99.9,99.9,100.0,99.7,99.8,99.6,99.6,99.5,99.3,99.0,98.5,98.4,97.1,95.6,95.2,94.3,92.6,91.7,90.2,89.3,86.3,85.0,83.8,80.2,77.5,77.3,71.2,70.1,67.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,100.0,99.8,99.7,99.9,99.6,99.6,98.9,98.8,99.7,98.6,98.1,95.9,96.5,96.3,93.5,90.7,93.1,92.5,90.4,87.6,86.9,84.1,82.4,77.2,76.6,69.5,69.2];

var app = new Vue({
  el: '#app',
  data: {
    att_troops: '',
    def_troops: '',
    rolls: []
  },
  watch: {
    att_troops: function() {
      this.reset();
    },
    def_troops: function() {
      this.reset();
    }
  },
  computed: {
    attackable: function() {
      last_roll = this.last_roll();
      return last_roll && last_roll.att_troops > 1 && last_roll.def_troops > 0;
    },
    blitzable: function() {
      last_roll = this.last_roll();
      return last_roll && last_roll.att_troops > 3 && last_roll.def_troops > 0;
    },
    winning_probability: function() {
      last_roll = this.last_roll();
      if (!last_roll) {
        return;
      }

      index = (last_roll.att_troops - 1) * 50 + (last_roll.def_troops - 1)
      return win_probabilities[index];
    }
  },
  methods: {
    blitz_roll: function(el) {
      while (this.blitzable) {
        this.manual_roll();
      }
    },
    manual_roll: function(el) {
      last_roll = this.last_roll();

      att_dices_count = Math.min(last_roll.att_troops - 1, 3)
      def_dices_count = Math.min(last_roll.def_troops, 2)

      att_dices = []
      for (var i = 0; i < att_dices_count; ++i) {
        var dice_result = this.roll_dice()
        att_dices.push({value: dice_result});
      }

      def_dices = []
      for (var i = 0; i < def_dices_count; ++i) {
        var dice_result = this.roll_dice()
        def_dices.push({value: dice_result});
      }

      att_dices.sort(function(a, b){return b.value - a.value});
      def_dices.sort(function(a, b){return b.value - a.value});
      att_lost_troops = 0;
      def_lost_troops = 0;

      min_dices_count = Math.min(att_dices_count, def_dices_count);
      for (var i = 0; i < min_dices_count; ++i) {
        if (att_dices[i].value > def_dices[i].value) {
          att_dices[i].win = true
          def_lost_troops++;
        } else {
          def_dices[i].win = true
          att_lost_troops++;
        }
      }

      roll = {
        round: last_roll.round + 1,
        att_dices: att_dices,
        def_dices: def_dices,
        att_troops: last_roll.att_troops - att_lost_troops,
        def_troops: last_roll.def_troops - def_lost_troops
      }

      this.rolls.push(roll);
    },
    roll_dice: function() {
      return Math.floor((Math.random() * 6) + 1);
    },
    reset: function() {
      this.rolls = []
      this.rolls.push({
        round: 0,
        att_troops: this.att_troops,
        def_troops: this.def_troops,
        att_dices: [],
        def_dices: []
      })
    },
    last_roll: function() {
      return this.rolls[this.rolls.length - 1];
    }
  }
});
